{"version":3,"sources":["extensions/CanvasExt.js","simulations/RenderLoop.js","extensions/VectorExt.js","simulations/BirdSim/Bird.js","simulations/SpatialHash.js","simulations/BirdSim/BirdSim.js","components/LabelSlider.js","components/LabelSwitch.js","components/CircleGravityControls.js","components/BoxGravityControls.js","components/FovDisplay.js","components/FlockSimulation.js","components/Footer.js","App.js","index.js"],"names":["CanvasRenderingContext2D","prototype","line","x1","y1","x2","y2","this","beginPath","moveTo","lineTo","stroke","startRender","canvas","item","undefined","getContext","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","vendorCheck","cx","lastTime","Date","getTime","currentTime","dt","fixedDeltaCounter","fixedCount","simulation","init","simulationLoop","Math","min","fixedUpdate","update","render","Vec2D","rotate","angle","_x","y","_y","cos","sin","rotateTrig","sinAngle","cosAngle","atan2","clampSq","maxLength","maxLengthSq","lengthSq","unit","multiplyByScalar","Bird","Object","classCallCheck","position","random","width","height","velocity","effectMultiplier","flockingMultiplier","cw","ch","space","color","panicTimer","showPanic","arguments","path","i","add","fillStyle","fill","SpatialHash","size","spaces","spaceSize","spaceName","hasOwnProperty","k","klen","__space","newSize","clear","spaceX","spaceY","newSpace","neighbors","name","concat","push","floor","splice","createSpace","includes","items","len","neighbor","BirdSimulation","birds","bird","index","setupBirds","count","speed","maxSpeed","fov","repulseDistance","approachDistance","repulseValue","approachValue","linearRepulse","linearApproach","individualFlocking","setupAttraction","circleMode","circleDiameter1","circleDiameter2","circleValue","boxWidth1","boxWidth2","boxHeight1","boxHeight2","boxValue","setRedBird","setupPredator","radius1","radius2","colorPanic","panicTime","setPredator","setPredatorPosition","setLinearPredator","setPanicReduction","setPanicAmplification","setTriggerVisualizations","centerX","centerY","sinLookup","toConsumableArray","Array","keys","map","it","PI","forEach","console","log","_ref","setBirdCount","setFlightSpeed","setMaxSpeed","setFov","setRepulseDistance","setApproachDistance","setRepulseValue","setApproachValue","setLinearRepulse","setLinearApproach","setIndividualFlocking","birdCount","previousBirdCount","distance","approachSq","biggerDistance","max","resize","repulseSq","value","flightSpeed","predatorValue","maxSpeedSq","radians","fovTestAngle","fovTestSin","fovTestCos","_ref2","setCircleAttractMode","setCenterAttractDiameter","setCenterAttractFarthestDiameter","setCenterAttractValue","setBoxAttractWidth","setBoxAttractFarthestWidth","setBoxAttractHeight","setBoxAttractFarthestHeight","setBoxAttractValue","circleCenterMode","centerAttractRadius","centerAttractRadiusSq","centerAttractFarthestRadius","centerAttractFarthestRadiusSq","centerAttractValue","boxAttractValue","boxAttractHorizontalDist","boxAttractFarthestHorizontalDist","boxAttractVerticalDist","boxAttractFarthestVerticalDist","predatorPosition","predator","_ref3","predatorFullEffectRadius","predatorFullEffectRadiusSq","predatorMaxRadius","predatorMaxRadiusSq","panicSlowdownTime","linearPredator","panicReduction","panicAmplification","redBird","triggerVisualizations","_this","registerPosition","approacLength","itemsFromAdjacentSpaces","other","offset","clone","subtract","distanceSq","biggerDistanceSq","dot","t1","t2","panicAmplifier","multiplier","sqrt","reverse","centerOffsetX","centerOffsetY","centerDistanceSq","horizontalDist","verticalDist","absH","abs","absV","sign","predatorOffsetX","predatorOffsetY","predatorDistanceSq","flockBehaviour","_","fillRect","arc","maxHorz","maxVert","lineWidth","velAngle","clearRect","renderCircleAttractMode","renderBoxAttractMode","renderPredator","renderBirdTriggers","draw","birdSim","LabelSlider","label","step","onChange","_ref$suffix","suffix","react_default","a","createElement","style","marginTop","marginLeft","marginRight","marginBottom","index_esm","axis","xstep","xmin","xmax","LabelSwitch","_ref$onLabel","onLabel","_ref$offLabel","offLabel","dist_index_esm","CircleGravityControls","force","changeForce","diameter","changeDiameter","maxDiameter","changeMaxDiameter","components_LabelSlider","toFixed","BoxGravityControls","changeWidth","changeHeight","maxWidth","changeMaxWidth","maxHeight","changeMaxHeight","FovDisplay","canvasElement","useRef","context","useEffect","current","birdAngle","fovRad","margin","border","ref","FlockSimulation","props","location","search","_useState","useState","_useState2","slicedToArray","birdSetup","setBirdSetup","_useState3","_useState4","attractSetup","setAttractSetup","_useState5","_useState6","_useState7","triggers","_useState8","visuals","setVisuals","columnStyle","display","verticalAlign","changeBirdSetup","newSetup","changeAttractSetup","changeVisuals","changePredator","_ref4","addEventListener","event","rect","getBoundingClientRect","clientX","left","clientY","top","right","bottom","preventDefault","removeEventListener","paddingLeft","paddingRight","_ref5","objectSpread","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","components_FovDisplay","components_LabelSwitch","components_CircleGravityControls","_ref13","_ref14","_ref15","components_BoxGravityControls","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","Footer","textAlign","href","App","components_FlockSimulation","components_Footer","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.aff495de.chunk.js","sourcesContent":["CanvasRenderingContext2D.prototype.line = function (x1, y1, x2, y2) {\n    this.beginPath()\n    this.moveTo(x1, y1)\n    this.lineTo(x2, y2)\n    this.stroke()\n}","const vendorCheck = () => {\n    const vendors = ['webkit', 'moz'];\n    for (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame =\n            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n}\n\nconst startRender = (canvas, item) => {\n    if (typeof (canvas.getContext) === undefined) {\n        return\n    }\n\n    vendorCheck()\n\n    let cx = canvas.getContext('2d'),\n        lastTime = (new Date()).getTime(),\n        currentTime = 0,\n        dt = 0,\n        fixedDeltaCounter = 0,\n        fixedCount = 0\n    \n    const maxLoops = 1,\n        fixedDelta = 1.0/60\n    \n    canvas.simulation = item\n    item.init(canvas)\n\n    const simulationLoop = () => {\n        window.requestAnimationFrame(simulationLoop)\n\n        currentTime = (new Date()).getTime()\n        dt = Math.min((currentTime - lastTime) / 1000, 0.03)\n\n        fixedDeltaCounter += dt\t\t\n        fixedCount = 0\n\t\t\n\t\tif (fixedDeltaCounter < fixedDelta) {\n\t\t\tfixedDeltaCounter = fixedDelta\n\t\t}\n\t\t\n\t\twhile (fixedDeltaCounter >= fixedDelta && fixedCount < maxLoops) {\n\t\t\titem.fixedUpdate(fixedDelta)\n\t\t\tfixedDeltaCounter -= fixedDelta\n\t\t\tfixedCount++\n\t\t}\n\t\t\n\t\tif (fixedCount >= maxLoops) {\n\t\t\tfixedDeltaCounter = 0\n\t\t}\n\n        item.update(dt)\n\n        item.render(cx)\n\n        lastTime = currentTime\n    }\n\n    simulationLoop()\n}\n\nexport default startRender","import * as Vec2D from 'vector2d'\n\nVec2D.Vector.prototype.rotate = function (angle) {\n    const x = this._x, y = this._y\n    this._x = x * Math.cos(angle) - y * Math.sin(angle)\n    this._y = x * Math.sin(angle) + y * Math.cos(angle)\n    return this\n}\n\nVec2D.Vector.prototype.rotateTrig = function (sinAngle, cosAngle) {\n    const x = this._x, y = this._y\n    this._x = x * cosAngle - y * sinAngle\n    this._y = x * sinAngle + y * cosAngle\n    return this\n}\n\nVec2D.Vector.prototype.angle = function () {\n    return Math.atan2(this._y, this._x)\n}\n\nVec2D.Vector.prototype.clampSq = function (maxLength, maxLengthSq) {\n    if (this.lengthSq() > maxLengthSq) {\n        this.unit().multiplyByScalar(maxLength)\n    }\n    return this\n}\n","import * as Vec2D from 'vector2d'\nimport '../../extensions/VectorExt'\n\nclass Bird {\n\n    constructor(canvas) {\n        this.canvas = canvas\n        this.position = new Vec2D.Vector(Math.random() * canvas.width, Math.random() * canvas.height)\n        this.velocity = new Vec2D.Vector(-5 + Math.random() * 10, -5 + Math.random() * 10)\n        this.effectMultiplier = 0.1 + Math.random() * 0.9\n        this.flockingMultiplier = 0.6 + Math.random() * 0.4\n        this.cw = canvas.width\n        this.ch = canvas.height\n        this.space = ''\n        this.color = '#0000FF'\n        this.panicTimer = 0\n    }\n\n    draw(cx, showPanic = true) {\n        const path = [new Vec2D.Vector(10, 0), new Vec2D.Vector(-5, 5), new Vec2D.Vector(-5, -5)]\n        const angle = this.velocity.angle()\n        const sinAngle = Math.sin(angle)\n        const cosAngle = Math.cos(angle)\n        for (let i = 0; i < path.length; i++) {\n            path[i].rotateTrig(sinAngle, cosAngle).add(this.position)\n        }\n\n        cx.beginPath()\n        cx.fillStyle = showPanic && this.panicTimer > 0 ? '#FFAA00' : this.color\n        cx.moveTo(path[0].x, path[0].y)\n        for (let i = 1; i < path.length; i++) {\n            cx.lineTo(path[i].x, path[i].y)\n        }\n        cx.fill()\n    }\n}\n\nexport default Bird","\nclass SpatialHash {\n\n    constructor(size) {\n        this.spaces = {}\n        this.spaceSize = size\n    }\n\n    clear() {\n        for (let spaceName in this.spaces) {\n            if (this.spaces.hasOwnProperty(spaceName)) {\n                const space = this.spaces[spaceName]\n                for (let k = 0, klen = space.length; k < klen; k++) {\n                    space[k].__space = null\n                }\n                space.length = 0\n            }\n        }\n    }\n\n    resize(newSize) {\n        this.spaceSize = newSize\n        this.clear()\n    }\n\n    createSpace(spaceX, spaceY, spaceName) {\n        const newSpace = []\n        newSpace.neighbors = []\n        this.spaces[spaceName] = newSpace\n        for (let x = spaceX - 1; x <= spaceX + 1; x++) {\n            for (let y = spaceY - 1; y <= spaceY + 1; y++) {\n                const name = `${x},${y}`\n                if (this.spaces.hasOwnProperty(name)) {\n                    const space = this.spaces[name]\n                    space.neighbors.push(newSpace)\n                    if (space !== newSpace) {\n                        newSpace.neighbors.push(space)\n                    }\n                }\n            }\n        }\n    }\n\n    registerPosition(item, position) {\n        const spaceX = Math.floor(position.x / this.spaceSize)\n        const spaceY = Math.floor(position.y / this.spaceSize)\n        const spaceName = `${spaceX},${spaceY}`\n\n        if (item.__space !== spaceName) {\n            if (this.spaces.hasOwnProperty(item.__space)) {\n                const space = this.spaces[item.__space]\n                for (var i = 0; i < space.length; i++) {\n                    if (space[i] === item) {\n                        space.splice(i, 1);\n                        break\n                    }\n                }\n            }\n            item.__space = spaceName\n            if (!this.spaces.hasOwnProperty(spaceName)) {\n                this.createSpace(spaceX, spaceY, spaceName)\n            }\n            if (!this.spaces[spaceName].includes(item)) {\n                this.spaces[spaceName].push(item)\n            }\n        }\n    }\n\n    itemsFromAdjacentSpaces(position) {\n        const spaceX = Math.floor(position.x / this.spaceSize)\n        const spaceY = Math.floor(position.y / this.spaceSize)\n        const spaceName = `${spaceX},${spaceY}`\n\n        if (!this.spaces.hasOwnProperty(spaceName)) {\n            return []\n        }\n\n        const space = this.spaces[spaceName]\n        const items = []\n\n        for (let i = 0, len = space.neighbors.length; i < len; i++) {\n            const neighbor = space.neighbors[i]\n            for (let k = 0, klen = neighbor.length; k < klen; k++) {\n                items.push(neighbor[k])\n            }\n        }\n\n        return items\n    }\n}\n\nexport default SpatialHash","import * as Vec2D from 'vector2d'\nimport '../../extensions/CanvasExt'\nimport Bird from './Bird'\nimport SpatialHash from '../SpatialHash'\n\nclass BirdSimulation {\n\n    init(canvas) {\n        this.canvas = canvas\n        this.width = canvas.width\n        this.height = canvas.height\n\n        this.birds = []\n        for (let i = 0; i < 2500; i++) {\n            const bird = new Bird(canvas)\n            bird.index = i\n            this.birds.push(bird)\n        }\n\n        this.spaces = new SpatialHash(10)\n\n        this.setupBirds({\n            count: 100, speed: 50, maxSpeed: 100, fov: 270,\n            repulseDistance: 15, approachDistance: 30, repulseValue: 3,\n            approachValue: 0.5, linearRepulse: false, linearApproach: false,\n            individualFlocking: false\n        })\n\n        this.setupAttraction({\n            circleMode: true, circleDiameter1: 200, circleDiameter2: 400, circleValue: 1,\n            boxWidth1: 500, boxWidth2: 700, boxHeight1: 50, boxHeight2: 100, boxValue: 1\n        })\n\n        this.setRedBird(true)\n\n        this.setupPredator({\n            radius1: 30, radius2: 150, colorPanic: false, panicTime: 4\n        })\n        this.setPredator(false)\n        this.setPredatorPosition(0, 0)\n        this.setLinearPredator(true)\n        this.setPanicReduction(0.2)\n        this.setPanicAmplification(10)\n\n        this.setTriggerVisualizations(false)\n\n        this.centerX = canvas.width * 0.5\n        this.centerY = canvas.height * 0.5\n\n        this.sinLookup = [...Array(100).keys()].map( it => Math.sin(it / 100 * Math.PI) )\n\n        this.sinLookup.forEach( it => console.log('sin', it))\n    }\n\n    setupBirds({ count, speed, maxSpeed, fov, repulseDistance, approachDistance,\n        repulseValue, approachValue, linearRepulse, linearApproach, individualFlocking }) {\n\n        this.setBirdCount(count)\n        this.setFlightSpeed(speed)\n        this.setMaxSpeed(maxSpeed)\n        this.setFov(fov)\n        this.setRepulseDistance(repulseDistance)\n        this.setApproachDistance(approachDistance)\n        this.setRepulseValue(repulseValue)\n        this.setApproachValue(approachValue)\n        this.setLinearRepulse(linearRepulse)\n        this.setLinearApproach(linearApproach)\n        this.setIndividualFlocking(individualFlocking)\n    }\n\n    setBirdCount(count) {\n        this.birdCount = count\n        if (this.birdCount === this.previousBirdCount) {\n            return\n        }\n        if (this.birdCount < this.previousBirdCount) {\n            this.spaces.clear()\n        }\n        this.previousBirdCount = this.birdCount\n    }\n\n    setApproachDistance(distance) {\n        this.approachDistance = distance\n        this.approachSq = this.approachDistance * this.approachDistance\n        let biggerDistance = Math.max(this.approachDistance, this.repulseDistance)\n        if (this.spaces.spaceSize !== biggerDistance) {\n            this.spaces.resize(biggerDistance)\n        }\n    }\n\n    setRepulseDistance(distance) {\n        this.repulseDistance = distance\n        this.repulseSq = this.repulseDistance * this.repulseDistance\n        let biggerDistance = Math.max(this.approachDistance, this.repulseDistance)\n        if (this.spaces.spaceSize !== biggerDistance) {\n            this.spaces.resize(biggerDistance)\n        }\n    }\n\n    setFlightSpeed(value) {\n        this.flightSpeed = value\n        this.predatorValue = value * 2.5\n    }\n\n    setMaxSpeed(value) {\n        this.maxSpeed = value\n        this.maxSpeedSq = this.maxSpeed * this.maxSpeed\n    }\n\n    setApproachValue(value) {\n        this.approachValue = value\n    }\n\n    setRepulseValue(value) {\n        this.repulseValue = value\n    }\n\n    setLinearApproach(value) {\n        this.linearApproach = value\n    }\n\n    setLinearRepulse(value) {\n        this.linearRepulse = value\n    }\n\n    setFov(value) {\n        this.fov = value\n        const radians = value * Math.PI / 180\n        if (this.fov === 180) {\n            this.fovTestAngle = 0\n        } else {\n            this.fovTestAngle = (radians - Math.PI) / 2\n        }\n        this.fovTestSin = Math.sin(this.fovTestAngle)\n        this.fovTestCos = Math.cos(this.fovTestAngle)\n    }\n\n    setupAttraction({ circleMode, circleDiameter1, circleDiameter2,\n        circleValue, boxWidth1, boxWidth2, boxHeight1, boxHeight2, boxValue }) {\n        this.setCircleAttractMode(circleMode)\n        this.setCenterAttractDiameter(circleDiameter1)\n        this.setCenterAttractFarthestDiameter(circleDiameter2)\n        this.setCenterAttractValue(circleValue)\n        this.setBoxAttractWidth(boxWidth1)\n        this.setBoxAttractFarthestWidth(boxWidth2)\n        this.setBoxAttractHeight(boxHeight1)\n        this.setBoxAttractFarthestHeight(boxHeight2)\n        this.setBoxAttractValue(boxValue)\n    }\n\n    setCircleAttractMode(value) {\n        this.circleCenterMode = value\n    }\n\n    setCenterAttractDiameter(value) {\n        this.centerAttractRadius = value * 0.5\n        this.centerAttractRadiusSq = this.centerAttractRadius * this.centerAttractRadius\n    }\n\n    setCenterAttractFarthestDiameter(value) {\n        this.centerAttractFarthestRadius = value * 0.5\n        this.centerAttractFarthestRadiusSq = this.centerAttractFarthestRadius * this.centerAttractFarthestRadius\n    }\n\n    setCenterAttractValue(value) {\n        this.centerAttractValue = value\n    }\n\n    setBoxAttractValue(value) {\n        this.boxAttractValue = value\n    }\n\n    setBoxAttractWidth(value) {\n        this.boxAttractHorizontalDist = value * 0.5\n    }\n\n    setBoxAttractFarthestWidth(value) {\n        this.boxAttractFarthestHorizontalDist = value * 0.5\n    }\n\n    setBoxAttractHeight(value) {\n        this.boxAttractVerticalDist = value * 0.5\n    }\n\n    setBoxAttractFarthestHeight(value) {\n        this.boxAttractFarthestVerticalDist = value * 0.5\n    }\n\n    setPredatorPosition(x, y) {\n        this.predatorPosition = new Vec2D.Vector(x, y)\n    }\n\n    setPredator(value) {\n        this.predator = value\n    }\n\n    setupPredator({ radius1, radius2, colorPanic, panicTime }) {\n        this.predatorFullEffectRadius = radius1\n        this.predatorFullEffectRadiusSq = radius1 * radius1\n\n        this.predatorMaxRadius = radius2\n        this.predatorMaxRadiusSq = radius2 * radius2\n\n        this.panicTime = panicTime\n        this.panicSlowdownTime = panicTime * 0.25\n        this.colorPanic = colorPanic\n    }\n\n    setPredatorValue(value) {\n        this.predatorValue = value\n    }\n\n    setLinearPredator(value) {\n        this.linearPredator = value\n    }\n\n    setPanicReduction(value) {\n        this.panicReduction = value\n    }\n\n    setPanicAmplification(value) {\n        this.panicAmplification = value\n    }\n\n    setRedBird(value) {\n        this.redBird = value\n        this.birds[0].color = this.redBird ? '#FF0000' : '#0000FF'\n    }\n\n    setTriggerVisualizations(value) {\n        this.triggerVisualizations = value\n    }\n\n    setIndividualFlocking(value) {\n        this.individualFlocking = value\n    }\n\n    flockBehaviour(bird, dt) {\n        let speed = this.flightSpeed\n        if (bird.panicTimer > 0) {\n            if (bird.panicTimer > this.panicSlowdownTime) {\n                speed *= 1.5\n            } else {\n                speed *= 1 + 0.5 * (bird.panicTimer / this.panicSlowdownTime)\n            }\n            bird.panicTimer -= dt\n        }\n\n        bird.velocity.unit().multiplyByScalar(speed)\n\n        this.spaces.registerPosition(bird, bird.position)\n\n        const approacLength = this.approachDistance - this.repulseDistance\n\n        const handleOther = (other) => {\n            let offset = other.position.clone().subtract(bird.position)\n            const distanceSq = offset.lengthSq()\n            const biggerDistanceSq = Math.max(this.approachSq, this.repulseSq)\n            const flockingMultiplier = this.individualFlocking ? bird.flockingMultiplier : 1\n            if (bird === other\n                || distanceSq > biggerDistanceSq) {\n                return\n            }\n            if (this.fov < 360) {\n                if (this.fov === 180 && bird.velocity.dot(offset) < 0) {\n                    return\n                } else if (this.fov !== 180) {\n                    const t1 = offset.clone().rotateTrig(this.fovTestSin, this.fovTestCos)\n                    const t2 = offset.clone().rotateTrig(-this.fovTestSin, this.fovTestCos)\n                    if ((this.fov < 180 && (bird.velocity.dot(t1) < 0 || bird.velocity.dot(t2) < 0))\n                        || (this.fov > 180 && bird.velocity.dot(t1) < 0 && bird.velocity.dot(t2) < 0)) {\n                        return\n                    }\n                }\n            }\n            if (other.panicTimer > bird.panicTimer + this.panicTime * 0.5) {\n                bird.panicTimer = other.panicTimer - this.panicReduction\n            }\n            const panicAmplifier = other.panicTimer > 0 && other.panicTimer > bird.panicTimer ? this.panicAmplification : bird.panicTimer > 0 ? 0.1 : 1\n            if (distanceSq < this.repulseSq && other.panicTimer <= 0) {\n                if (this.linearRepulse) {\n                    const multiplier = (this.repulseDistance - Math.sqrt(distanceSq)) / this.repulseDistance\n                    offset.reverse().unit().multiplyByScalar(this.repulseValue * multiplier * flockingMultiplier)\n                } else {\n                    offset.reverse().unit().multiplyByScalar(this.repulseValue * flockingMultiplier)\n                }\n            } else {\n                if (this.linearApproach) {\n                    const multiplier = (approacLength - (Math.sqrt(distanceSq) - this.repulseDistance)) / (this.approachDistance - this.repulseDistance)\n                    offset = other.velocity.clone().unit().multiplyByScalar(this.approachValue * multiplier * flockingMultiplier * panicAmplifier)\n                } else {\n                    offset = other.velocity.clone().unit().multiplyByScalar(this.approachValue * flockingMultiplier * panicAmplifier)\n                }\n            }\n            bird.velocity.add(offset)\n        }\n\n        if (this.fov > 0) {\n            this.spaces.itemsFromAdjacentSpaces(bird.position).forEach(handleOther)\n        }\n\n        if (this.circleCenterMode) {\n            const centerOffsetX = this.centerX - bird.position.x\n            const centerOffsetY = this.centerY - bird.position.y\n            const centerDistanceSq = centerOffsetX * centerOffsetX + centerOffsetY * centerOffsetY\n\n            if (centerDistanceSq > this.centerAttractRadiusSq) {\n                if (centerDistanceSq < this.centerAttractFarthestRadiusSq) {\n                    const multiplier = (Math.sqrt(centerDistanceSq) - this.centerAttractRadius) / (this.centerAttractFarthestRadius - this.centerAttractRadius)\n                    bird.velocity.add(new Vec2D.Vector(centerOffsetX, centerOffsetY).unit().multiplyByScalar(this.centerAttractValue * multiplier * bird.effectMultiplier))\n                } else {\n                    bird.velocity.add(new Vec2D.Vector(centerOffsetX, centerOffsetY).unit().multiplyByScalar(this.centerAttractValue * bird.effectMultiplier))\n                }\n            }\n        } else {\n            const horizontalDist = this.centerX - bird.position.x\n            const verticalDist = this.centerY - bird.position.y\n            const absH = Math.abs(horizontalDist)\n            const absV = Math.abs(verticalDist)\n\n            if (absH > this.boxAttractHorizontalDist) {\n                if (absH < this.boxAttractFarthestHorizontalDist) {\n                    const multiplier = (absH - this.boxAttractHorizontalDist) / (this.boxAttractFarthestHorizontalDist - this.boxAttractHorizontalDist)\n                    bird.velocity.add(new Vec2D.Vector(Math.sign(horizontalDist), 0).multiplyByScalar(this.boxAttractValue * multiplier * bird.effectMultiplier))\n                } else {\n                    bird.velocity.add(new Vec2D.Vector(Math.sign(horizontalDist), 0).multiplyByScalar(this.boxAttractValue * bird.effectMultiplier))\n                }\n            }\n            if (absV > this.boxAttractVerticalDist) {\n                if (absV < this.boxAttractFarthestVerticalDist) {\n                    const multiplier = (absV - this.boxAttractVerticalDist) / (this.boxAttractFarthestVerticalDist - this.boxAttractVerticalDist)\n                    bird.velocity.add(new Vec2D.Vector(0, Math.sign(verticalDist)).multiplyByScalar(this.boxAttractValue * multiplier * bird.effectMultiplier))\n                } else {\n                    bird.velocity.add(new Vec2D.Vector(0, Math.sign(verticalDist)).multiplyByScalar(this.boxAttractValue * bird.effectMultiplier))\n                }\n            }\n        }\n\n        if (this.predator) {\n            const predatorOffsetX = bird.position.x - this.predatorPosition.x\n            const predatorOffsetY = bird.position.y - this.predatorPosition.y\n            const predatorDistanceSq = predatorOffsetX * predatorOffsetX + predatorOffsetY * predatorOffsetY\n\n            if (predatorDistanceSq < this.predatorMaxRadiusSq) {\n                if (predatorDistanceSq < this.predatorFullEffectRadiusSq) {\n                    bird.velocity.add(new Vec2D.Vector(predatorOffsetX, predatorOffsetY).unit().multiplyByScalar(this.predatorValue * bird.effectMultiplier))\n                } else {\n                    const multiplier = 1 - (Math.sqrt(predatorDistanceSq) - this.predatorFullEffectRadius) / (this.predatorMaxRadius - this.predatorFullEffectRadius)\n                    bird.velocity.add(new Vec2D.Vector(predatorOffsetX, predatorOffsetY).unit().multiplyByScalar(this.predatorValue * multiplier * bird.effectMultiplier))\n                }\n                bird.panicTimer = this.panicTime\n            }\n        }\n\n        bird.velocity.clampSq(this.maxSpeed, this.maxSpeedSq)\n        bird.position.add(bird.velocity.multiplyByScalar(dt))\n\n        if (bird.position.x < 0) {\n            bird.position.x = Math.min(-bird.position.x, this.flightSpeed)\n            bird.velocity.x = -bird.velocity.x\n        }\n        if (bird.position.y < 0) {\n            bird.position.y = Math.min(-bird.position.y, this.flightSpeed)\n            bird.velocity.y = -bird.velocity.y\n        }\n        if (bird.position.x > this.width) {\n            bird.position.x = Math.max(this.width - (bird.position.x - this.width), this.width - this.flightSpeed)\n            bird.velocity.x = -bird.velocity.x\n        }\n        if (bird.position.y > this.height) {\n            bird.position.y = Math.max(this.height - (bird.position.y - this.height), this.height - this.flightSpeed)\n            bird.velocity.y = -bird.velocity.y\n        }\n   }\n\n    fixedUpdate(dt) {\n        for (let i = 0; i < this.birdCount; i++) {\n            const bird = this.birds[i]\n            this.flockBehaviour(bird, dt)\n        }\n    }\n\n    update(_) {\n\n    }\n\n    renderCircleAttractMode(cx) {\n        cx.fillStyle = '#DDDDDD'\n        cx.fillRect(0, 0, this.width, this.height)\n        cx.beginPath()\n        cx.fillStyle = '#EEEEEE'\n        cx.arc(this.centerX, this.centerY, this.centerAttractFarthestRadius, 0, Math.PI * 2)\n        cx.fill()\n        cx.beginPath()\n        cx.fillStyle = '#FFFFFF'\n        cx.arc(this.centerX, this.centerY, this.centerAttractRadius, 0, Math.PI * 2)\n        cx.fill()\n    }\n\n    renderBoxAttractMode(cx) {\n        cx.fillStyle = '#DDDDDD'\n        cx.fillRect(0, 0, this.width, this.height)\n        cx.fillStyle = '#EEEEEE'\n        const maxHorz = Math.max(this.boxAttractFarthestHorizontalDist, this.boxAttractHorizontalDist)\n        const maxVert = Math.max(this.boxAttractFarthestVerticalDist, this.boxAttractVerticalDist)\n        cx.fillRect(this.centerX - maxHorz, this.centerY - maxVert, maxHorz * 2, maxVert * 2)\n        cx.fillStyle = '#FFFFFF'\n        cx.fillRect(this.centerX - this.boxAttractHorizontalDist, this.centerY - this.boxAttractVerticalDist, this.boxAttractHorizontalDist * 2, this.boxAttractVerticalDist * 2)\n        cx.lineWidth = 0.2\n        cx.line(this.centerX - maxHorz, 0, this.centerX - maxHorz, this.height)\n        cx.line(this.centerX + maxHorz, 0, this.centerX + maxHorz, this.height)\n        cx.line(0, this.centerY - maxVert, this.width, this.centerY - maxVert)\n        cx.line(0, this.centerY + maxVert, this.width, this.centerY + maxVert)\n        cx.line(this.centerX - this.boxAttractHorizontalDist, 0, this.centerX - this.boxAttractHorizontalDist, this.height)\n        cx.line(this.centerX + this.boxAttractHorizontalDist, 0, this.centerX + this.boxAttractHorizontalDist, this.height)\n        cx.line(0, this.centerY - this.boxAttractVerticalDist, this.width, this.centerY - this.boxAttractVerticalDist)\n        cx.line(0, this.centerY + this.boxAttractVerticalDist, this.width, this.centerY + this.boxAttractVerticalDist)\n    }\n\n    renderPredator(cx) {\n        cx.fillStyle = '#D5AAAAAA'\n        cx.beginPath()\n        cx.arc(this.predatorPosition.x, this.predatorPosition.y, this.predatorMaxRadius, 0, Math.PI * 2)\n        cx.fill()\n        cx.fillStyle = '#DD8888AA'\n        cx.beginPath()\n        cx.arc(this.predatorPosition.x, this.predatorPosition.y, this.predatorFullEffectRadius, 0, Math.PI * 2)\n        cx.fill()\n    }\n\n    renderBirdTriggers(cx, bird) {\n        const velAngle = bird.velocity.angle()\n        const fov = this.fov / 180 * Math.PI\n        if (this.repulseDistance < this.approachDistance) {\n            cx.fillStyle = '#88CC8888'\n            cx.beginPath()\n            cx.moveTo(bird.position.x, bird.position.y)\n            cx.arc(bird.position.x, bird.position.y, this.approachDistance, velAngle - fov / 2, velAngle + fov / 2)\n            cx.fill()\n        }\n        cx.fillStyle = '#CC888888'\n        cx.beginPath()\n        cx.moveTo(bird.position.x, bird.position.y)\n        cx.arc(bird.position.x, bird.position.y, this.repulseDistance, velAngle - fov / 2, velAngle + fov / 2)\n        cx.fill()\n    }\n\n    render(cx) {\n        cx.clearRect(0, 0, this.width, this.height)\n\n        if (this.triggerVisualizations) {\n            if (this.circleCenterMode) {\n                this.renderCircleAttractMode(cx)\n            } else {\n                this.renderBoxAttractMode(cx)\n            }\n            if (this.predator) {\n                this.renderPredator(cx)\n            }\n        }\n\n        if (this.triggerVisualizations && this.redBird) {\n            this.renderBirdTriggers(cx, this.birds[0])\n        }\n\n        for (let i = this.birdCount - 1; i >= 0; i--) {\n            const bird = this.birds[i]\n            bird.draw(cx, this.colorPanic)\n        }\n    }\n}\n\nconst birdSim = () => {\n    return new BirdSimulation()\n}\n\nexport default birdSim\n","import React from 'react'\nimport Slider from 'react-input-slider'\n\nconst LabelSlider = ({ label, value, step, min, max, onChange, suffix='' }) => {\n    const divStyle = {\n        marginTop: '5px',\n        marginLeft: '5px',\n        marginRight: '5px',\n        marginBottom: '5px'\n    }\n    return <div style={divStyle}>\n        <div>\n            {`${label}: ${value}${suffix}`}\n        </div>\n        <Slider\n            axis=\"x\"\n            xstep={step}\n            xmin={min}\n            xmax={max}\n            x={value}\n            onChange={onChange()}\n        />\n    </div>\n}\n\nexport default LabelSlider","import React from 'react'\nimport Switch from 'react-input-switch'\n\nconst LabelSwitch = ({ label, value, onChange, onLabel = 'On', offLabel = 'Off' }) => {\n    const divStyle = {\n        marginTop: '5px',\n        marginLeft: '5px',\n        marginRight: '5px',\n        marginBottom: '5px'\n    }\n    const switchStyle = {\n        marginRight: '10px'\n    }\n    return <div style={divStyle}>\n        <Switch style={switchStyle}\n            value={value}\n            onChange={onChange()}\n        />\n        {`${label}: ${value ? onLabel : offLabel}`}\n    </div>\n}\n\nexport default LabelSwitch","import React from 'react'\nimport LabelSlider from './LabelSlider';\n\nconst CircleGravityControls = ({ force, changeForce,\n    diameter, changeDiameter,\n    maxDiameter, changeMaxDiameter }) =>\n    <div>\n        <LabelSlider\n            label='Min Diameter' value={diameter}\n            min={0} max={2000} step={10}\n            onChange={changeDiameter}\n        />\n        <LabelSlider\n            label='Max Diameter' value={maxDiameter}\n            min={0} max={2000} step={10}\n            onChange={changeMaxDiameter}\n        />\n        <LabelSlider\n            label='Attract force' value={force.toFixed(1)}\n            min={0} max={10} step={0.1}\n            onChange={changeForce}\n        />\n    </div>\n\nexport default CircleGravityControls","import React from 'react'\nimport LabelSlider from './LabelSlider';\n\nconst BoxGravityControls = ({ force, changeForce,\n    width, changeWidth,\n    height, changeHeight,\n    maxWidth, changeMaxWidth,\n    maxHeight, changeMaxHeight }) =>\n    <div>\n        <LabelSlider\n            label='Min Width' value={width}\n            min={0} max={2000} step={10}\n            onChange={changeWidth}\n        />\n        <LabelSlider\n            label='Min Height' value={height}\n            min={0} max={2000} step={10}\n            onChange={changeHeight}\n        />\n        <LabelSlider\n            label='Max Width' value={maxWidth}\n            min={0} max={2000} step={10}\n            onChange={changeMaxWidth}\n        />\n        <LabelSlider\n            label='Max Height' value={maxHeight}\n            min={0} max={2000} step={10}\n            onChange={changeMaxHeight}\n        />\n        <LabelSlider\n            label='Attract force' value={force.toFixed(1)}\n            min={0} max={10} step={0.1}\n            onChange={changeForce}\n        />\n    </div>\n\nexport default BoxGravityControls","import React, { useEffect, useRef } from 'react'\nimport * as Vec2D from 'vector2d'\nimport '../extensions/VectorExt'\n\nconst FovDisplay = ({ fov, approachDistance, repulseDistance }) => {\n    const canvasElement = useRef(null)\n    const canvasStyle = {\n        border: ' 1px solid #aaa',\n    }\n    const divStyle = {\n        margin: '5px'\n    }\n\n    let context = null\n\n    const renderHook = () => {\n        const canvas = canvasElement.current\n        if (context === null) {\n            context = canvas.getContext('2d')\n        }\n        context.clearRect(0, 0, canvas.width, canvas.height)\n\n        const centerX = canvas.width * 0.5\n        const centerY = canvas.height * 0.5\n        const birdAngle = Math.PI * -0.5\n        const fovRad = fov / 180 * Math.PI\n        if (repulseDistance < approachDistance) {\n            context.fillStyle = '#88CC8888'\n            context.beginPath()\n            context.moveTo(centerX, centerY)\n            context.arc(centerX, centerY, approachDistance, birdAngle - fovRad / 2, birdAngle + fovRad / 2)\n            context.fill()\n        }\n        context.fillStyle = '#CC888888'\n        context.beginPath()\n        context.moveTo(centerX, centerY)\n        context.arc(centerX, centerY, repulseDistance, birdAngle - fovRad / 2, birdAngle + fovRad / 2)\n        context.fill()\n\n        const path = [new Vec2D.Vector(10, 0), new Vec2D.Vector(-5, 5), new Vec2D.Vector(-5, -5)]\n        const sinAngle = Math.sin(birdAngle)\n        const cosAngle = Math.cos(birdAngle)\n        for (let i = 0; i < path.length; i++) {\n            path[i].rotateTrig(sinAngle, cosAngle).add(new Vec2D.Vector(centerX, centerY))\n        }\n\n        context.beginPath()\n        context.fillStyle = '#FF0000'\n        context.moveTo(path[0].x, path[0].y)\n        for (let i = 1; i < path.length; i++) {\n            context.lineTo(path[i].x, path[i].y)\n        }\n        context.fill()\n    }\n\n    useEffect(renderHook)\n\n    return <div style={divStyle}>\n        <canvas style={canvasStyle} ref={canvasElement} width=\"200\" height=\"200\" />\n    </div>\n}\n\nexport default FovDisplay","import React, { useState, useEffect, useRef } from 'react'\nimport startRender from '../simulations/RenderLoop'\nimport birdSim from '../simulations/BirdSim/BirdSim'\nimport LabelSlider from './LabelSlider';\nimport LabelSwitch from './LabelSwitch';\nimport CircleGravityControls from './CircleGravityControls'\nimport BoxGravityControls from './BoxGravityControls'\nimport FovDisplay from './FovDisplay'\n\nconst FlockSimulation = props => {\n    console.log(props.location.search)\n    const [birdSetup, setBirdSetup] = useState({\n        count: 1500,\n        speed: 50,\n        maxSpeed: 120,\n        fov: 200,\n        repulseDistance: 30,\n        approachDistance: 60,\n        repulseValue: 3,\n        approachValue: 0.5,\n        linearRepulse: 1,\n        linearApproach: 0,\n        individualFlocking: 0\n    })\n    const [attractSetup, setAttractSetup] = useState({\n        circleMode: 0,\n        circleDiameter1: 200,\n        circleDiameter2: 400,\n        circleValue: 1,\n        boxWidth1: 500,\n        boxWidth2: 700,\n        boxHeight1: 50,\n        boxHeight2: 100,\n        boxValue: 1\n    })\n    const [predator, setPredator] = useState({\n        radius1: 110,\n        radius2: 150,\n        colorPanic: 0,\n        panicTime: 4\n    })\n    const [visuals, setVisuals] = useState({\n        triggers: 0,\n        redBird: 1\n    })\n\n    const canvasElement = useRef(null)\n\n    const canvasStyle = {\n        border: ' 1px solid #aaa',\n    }\n    const controlAreaStyle = {\n        paddingLeft: '25px',\n        paddingRight: '25px',\n    }\n    const columnStyle = {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        width: '200px',\n        marginLeft: '5px',\n        marginRight: '5px'\n    }\n    const titleStyle = {\n        margin: '5px'\n    }\n\n    const startHook = () => {\n        console.log('start hook')\n\n        startRender(canvasElement.current, birdSim())\n\n        canvasElement.current.simulation.setupBirds(birdSetup)\n        canvasElement.current.simulation.setupAttraction(attractSetup)\n        canvasElement.current.simulation.setupPredator(predator)\n        canvasElement.current.simulation.setRedBird(visuals.redBird)\n        canvasElement.current.simulation.setTriggerVisualizations(visuals.triggers)\n\n        const mousedown = event => {\n            const rect = canvasElement.current.getBoundingClientRect()\n            if (event.clientX < rect.left || event.clientY < rect.top\n                || event.clientX > rect.right || event.clientY > rect.bottom) {\n                return\n            }\n            event.preventDefault()\n            canvasElement.current.simulation.setPredator(true)\n        }\n        const mouseup = event => {\n            const rect = canvasElement.current.getBoundingClientRect()\n            if (event.clientX < rect.left || event.clientY < rect.top\n                || event.clientX > rect.right || event.clientY > rect.bottom) {\n                return\n            }\n            canvasElement.current.simulation.setPredator(false)\n        }\n        const mousemove = event => {\n            const rect = canvasElement.current.getBoundingClientRect()\n            if (event.clientX < rect.left || event.clientY < rect.top\n                || event.clientX > rect.right || event.clientY > rect.bottom) {\n                canvasElement.current.simulation.setPredator(false)\n                return\n            }\n            event.preventDefault()\n            const x = (event.clientX - rect.left) / (rect.right - rect.left) * canvasElement.current.width\n            const y = (event.clientY - rect.top) / (rect.bottom - rect.top) * canvasElement.current.height\n            canvasElement.current.simulation.setPredatorPosition(x, y)\n        }\n\n        window.addEventListener(\"mousedown\", mousedown)\n        window.addEventListener(\"mouseup\", mouseup)\n        window.addEventListener(\"mousemove\", mousemove)\n        \n        return () => {\n            window.removeEventListener(\"mousemove\")\n            window.removeEventListener(\"mouseup\")\n            window.removeEventListener(\"mousedown\")\n        }\n    }\n\n    const changeBirdSetup = ({ count, speed, maxSpeed, fov, repulseDistance,\n        approachDistance, repulseValue, approachValue, linearRepulse, linearApproach,\n        individualFlocking }) => {\n\n        const newSpeed = speed > maxSpeed && speed === birdSetup.speed ? maxSpeed : speed\n        const newMaxSpeed = speed > maxSpeed && maxSpeed === birdSetup.maxSpeed ? speed : maxSpeed\n\n        const newSetup = {\n            count: count,\n            speed: newSpeed,\n            maxSpeed: newMaxSpeed,\n            fov: fov,\n            repulseDistance: repulseDistance,\n            approachDistance: approachDistance,\n            repulseValue: repulseValue,\n            approachValue: approachValue,\n            linearRepulse: linearRepulse,\n            linearApproach: linearApproach,\n            individualFlocking: individualFlocking\n        }\n        setBirdSetup(newSetup)\n        canvasElement.current.simulation.setupBirds(newSetup)\n    }\n\n    const changeAttractSetup = ({ circleMode, circleDiameter1, circleDiameter2,\n        circleValue, boxWidth1, boxWidth2, boxHeight1, boxHeight2, boxValue\n    }) => {\n\n        const newDiameter1 = circleDiameter1 > circleDiameter2 && attractSetup.circleDiameter1 === circleDiameter1 ? circleDiameter2 : circleDiameter1\n        const newDiameter2 = circleDiameter1 > circleDiameter2 && attractSetup.circleDiameter2 === circleDiameter2 ? circleDiameter1 : circleDiameter2\n        const newWidth1 = boxWidth1 > boxWidth2 && attractSetup.boxWidth1 === boxWidth1 ? boxWidth2 : boxWidth1\n        const newWidth2 = boxWidth1 > boxWidth2 && attractSetup.boxWidth2 === boxWidth2 ? boxWidth1 : boxWidth2\n        const newHeight1 = boxHeight1 > boxHeight2 && attractSetup.boxHeight1 === boxHeight1 ? boxHeight2 : boxHeight1\n        const newHeight2 = boxHeight1 > boxHeight2 && attractSetup.boxHeight2 === boxHeight2 ? boxHeight1 : boxHeight2\n\n        const newSetup = {\n            circleMode: circleMode,\n            circleDiameter1: newDiameter1,\n            circleDiameter2: newDiameter2,\n            circleValue: circleValue,\n            boxWidth1: newWidth1,\n            boxWidth2: newWidth2,\n            boxHeight1: newHeight1,\n            boxHeight2: newHeight2,\n            boxValue: boxValue\n        }\n        setAttractSetup(newSetup)\n        canvasElement.current.simulation.setupAttraction(newSetup)\n    }\n\n    const changeVisuals = ({ triggers, redBird }) => {\n        setVisuals({\n            triggers: triggers,\n            redBird: redBird\n        })\n        canvasElement.current.simulation.setRedBird(redBird)\n        canvasElement.current.simulation.setTriggerVisualizations(triggers)\n    }\n\n    const changePredator = ({ radius1, radius2, colorPanic, panicTime }) => {\n        const newRadius1 = radius1 > radius2 && radius1 === predator.radius1 ? radius2 : radius1\n        const newRadius2 = radius1 > radius2 && radius2 === predator.radius2 ? radius1 : radius2\n        const newSetup = {\n            radius1: newRadius1,\n            radius2: newRadius2,\n            colorPanic: colorPanic,\n            panicTime: panicTime\n        }\n        setPredator(newSetup)\n        canvasElement.current.simulation.setupPredator(newSetup)\n    }\n\n    useEffect(startHook, [])\n\n    return <div>\n        <canvas style={canvasStyle} ref={canvasElement} width=\"900\" height=\"600\" />\n        <div style={controlAreaStyle}>\n            <div style={columnStyle}>\n                <LabelSlider\n                    label='Birds' value={birdSetup.count}\n                    min={10} max={2500} step={10}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, count: x }) }\n                />\n                <LabelSlider\n                    label='Bird speed' value={birdSetup.speed}\n                    min={0} max={200} step={1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, speed: x }) }\n                />\n                <LabelSlider\n                    label='Max speed' value={birdSetup.maxSpeed}\n                    min={0} max={200} step={1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, maxSpeed: x }) }\n                />\n                <LabelSlider\n                    label='FOV' value={birdSetup.fov} suffix=\"°\"\n                    min={0} max={360} step={1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, fov: x }) }\n                />\n            </div>\n            <div style={columnStyle}>\n                <LabelSlider\n                    label='Approach distance' value={birdSetup.approachDistance}\n                    min={0} max={200} step={1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, approachDistance: x }) }\n                />\n                <LabelSlider\n                    label='Approach value' value={birdSetup.approachValue.toFixed(1)}\n                    min={0} max={10} step={0.1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, approachValue: x }) }\n                />\n                <LabelSlider\n                    label='Repulse distance' value={birdSetup.repulseDistance}\n                    min={0} max={200} step={1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, repulseDistance: x }) }\n                />\n                <LabelSlider\n                    label='Repulse value' value={birdSetup.repulseValue.toFixed(1)}\n                    min={0} max={10} step={0.1}\n                    onChange={() => ({ x }) => changeBirdSetup({ ...birdSetup, repulseValue: x }) }\n                />\n            </div>\n            <div style={columnStyle}>\n                <FovDisplay\n                    fov={birdSetup.fov}\n                    approachDistance={birdSetup.approachDistance}\n                    repulseDistance={birdSetup.repulseDistance}\n                />\n            </div>\n            <div style={columnStyle}>\n                <LabelSwitch\n                    label='Linear approach' value={birdSetup.linearApproach}\n                    onChange={() => x => changeBirdSetup({ ...birdSetup, linearApproach: x }) }\n                />\n                <LabelSwitch\n                    label='Linear repulse' value={birdSetup.linearRepulse}\n                    onChange={() => x => changeBirdSetup({ ...birdSetup, linearRepulse: x }) }\n                />\n                <LabelSwitch\n                    label='Flocking variance' value={birdSetup.individualFlocking}\n                    onChange={() => x => changeBirdSetup({ ...birdSetup, individualFlocking: x }) }\n                />\n                <LabelSwitch\n                    label='Red bird' value={visuals.redBird}\n                    onChange={() => x => changeVisuals({ ...visuals, redBird: x }) }\n                />\n                <LabelSwitch\n                    label='Show triggers' value={visuals.triggers}\n                    onChange={() => x => changeVisuals({ ...visuals, triggers: x }) }\n                />\n            </div>\n            <div style={columnStyle}>\n                <LabelSwitch\n                    label='Attract mode' value={attractSetup.circleMode}\n                    onLabel='Circle' offLabel='Box'\n                    onChange={() => x => changeAttractSetup({ ...attractSetup, circleMode: x }) }\n                />\n                {attractSetup.circleMode ?\n                    <CircleGravityControls diameter={attractSetup.circleDiameter1}\n                        changeDiameter={() => ({ x }) => changeAttractSetup({ ...attractSetup, circleDiameter1: x }) }\n                        maxDiameter={attractSetup.circleDiameter2}\n                        changeMaxDiameter={() => ({ x }) => changeAttractSetup({ ...attractSetup, circleDiameter2: x }) }\n                        force={attractSetup.circleValue}\n                        changeForce={() => ({ x }) => changeAttractSetup({ ...attractSetup, circleValue: x }) } /> :\n                    <BoxGravityControls force={attractSetup.boxValue}\n                        changeForce={() => ({ x }) => changeAttractSetup({ ...attractSetup, boxValue: x }) }\n                        width={attractSetup.boxWidth1}\n                        changeWidth={() => ({ x }) => changeAttractSetup({ ...attractSetup, boxWidth1: x }) }\n                        height={attractSetup.boxHeight1}\n                        changeHeight={() => ({ x }) => changeAttractSetup({ ...attractSetup, boxHeight1: x }) }\n                        maxWidth={attractSetup.boxWidth2}\n                        changeMaxWidth={() => ({ x }) => changeAttractSetup({ ...attractSetup, boxWidth2: x }) }\n                        maxHeight={attractSetup.boxHeight2}\n                        changeMaxHeight={() => ({ x }) => changeAttractSetup({ ...attractSetup, boxHeight2: x }) } />}\n            </div>\n            <div style={columnStyle}>\n                <div style={titleStyle}>\n                    Predator\n                </div>\n                <LabelSlider\n                    label='Min Radius' value={predator.radius1}\n                    min={0} max={500} step={5}\n                    onChange={() => ({ x }) => changePredator({ ...predator, radius1: x }) }\n                />\n                <LabelSlider\n                    label='Max Radius' value={predator.radius2}\n                    min={0} max={500} step={5}\n                    onChange={() => ({ x }) => changePredator({ ...predator, radius2: x }) }\n                />\n                <LabelSlider\n                    label='Panic Time' value={predator.panicTime.toFixed(1)}\n                    min={0} max={20} step={0.1}\n                    onChange={() => ({ x }) => changePredator({ ...predator, panicTime: x }) }\n                />\n                <LabelSwitch\n                    label='Color panic' value={predator.colorPanic}\n                    onChange={() => x => changePredator({ ...predator, colorPanic: x }) }\n                />\n            </div>\n        </div>\n    </div>\n}\n\nexport default FlockSimulation","import React from 'react'\n\nconst Footer = () => {\n\n    const style = {\n        textAlign: 'right'\n    }\n\n    return <div style={style}>\n        <p>Copyright (c) Jussi Enroos 2019<br />\n        <a href='https://github.com/McDevon/flocking-simulation'>Source</a> with MIT license</p>\n    </div>\n}\n\nexport default Footer","import React, { useEffect } from 'react'\nimport FlockSimulation from './components/FlockSimulation'\nimport Footer from './components/Footer'\n\nconst App = props => {\n  const divStyle = {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    maxWidth: '900px'\n  }\n\n  useEffect(() => {\n    console.log('app effect')\n  })\n\n  return (\n    <div style={divStyle}>\n      <FlockSimulation location={window.location} />\n      <Footer />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}